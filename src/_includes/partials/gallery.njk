<div class="gallery-section">
  <h2 class="gallery-section__title">{{ galleryTitle }}</h2>
  <div class="gallery">
    {% for image in galleryImages %}
    {% set filename = image.src | split('/') | last %}
    <a href="/assets/img/gallery/{{ filename }}"
       class="gallery__item"
       data-pswp-width="{{ image.src | imageDimension('width') }}"
       data-pswp-height="{{ image.src | imageDimension('height') }}">
      {% image
        image.src,
        image.alt,
        "(min-width: 1024px) 33vw, 100vw",
        "gallery__img",
        "lazy"
      %}
      <div class="gallery__caption">{{ image.caption }}</div>
    </a>
    {% endfor %}
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const lightbox = new PhotoSwipeLightbox({
        gallery: '.gallery',
        children: 'a',
        pswpModule: PhotoSwipe
      });
      lightbox.init();
    });
  </script>
</div>
